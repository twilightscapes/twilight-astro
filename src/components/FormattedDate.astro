---
import { getFormattedDate } from '../utils/date';

interface Props {
  date: Date | string;
  class?: string;
}

const { date, class: className } = Astro.props;
const formattedDate = getFormattedDate(date);

// Convert to Date object for datetime attribute
let dateObj: Date;
if (date instanceof Date) {
  dateObj = date;
} else if (typeof date === 'string' && /^\d{4}-\d{2}-\d{2}$/.test(date)) {
  // For date-only strings (YYYY-MM-DD), treat as local date not UTC
  const [year, month, day] = date.split('-').map(Number);
  dateObj = new Date(year, month - 1, day);
} else {
  dateObj = new Date(date);
}
---

<time datetime={dateObj.toISOString()} class={className}>
  {formattedDate}
</time>